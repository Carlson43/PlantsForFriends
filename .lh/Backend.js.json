{
    "sourceFile": "Backend.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1642364221640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1642364221640,
            "name": "Commit-0",
            "content": "function listAllData()\r\n{\r\n    var jsonstring=$(\"#jsonstring\").val();\r\n    console.log(\"Hi!\");\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/listobjects?owner=s201655&token=dMinmYeldeDsBbu0iiEIPGTPws0_\",function(response)\r\n    {\r\n    console.log(response);\r\n    });\r\n}\r\n\r\nfunction addAll()\r\n{\r\n    var jsonstring=  \r\n    \r\n    '{\"Titel\":\"'+$(\"#Ad_heading\").val()+'\",'+\r\n    '\"Pflanzenart\":\"'+$(\"#Ad_species\").val()+'\",'+\r\n    '\"Beschreibung\":\"'+$(\"#Ad_description\").val()+'\",'+\r\n    '\"Kontaktmöglichkeit\":\"'+$(\"#Ad_contact\").val()+'\",'+\r\n    '\"Preis\":\"'+$(\"#Ad_price\").val()+'\",'+\r\n    '\"lat\":\"'+lat[0].lat+'\",'+\r\n    '\"lng\":\"'+lat[0].lng+\r\n\r\n    '\"}';\r\n    console.log(\"add\"+ jsonstring);\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655&token=dMinmYeldeDsBbu0iiEIPGTPws0_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n    {\r\n    console.log(response);\r\n    });\r\n}\r\n\r\nfunction display_details()\r\n{ \r\n    key=0\r\n    var data = []\r\n \r\n\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/listobjects?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\",function(response)\r\n    { \r\n        key = response[response.length-1].jsonstring.Main\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/get?owner=s201655&token=dMinmYeldeDsBbu0iiEIPGTPws0_&key=\"+key,function(response)\r\n    {\r\n      data.push(response)\r\n      console.log(data)\r\n      console.log(data[0].lng,data[0].lat)\r\n\r\n    document.getElementById(\"Anzeigen_Name\").innerHTML = data[0].Titel;\r\n    document.getElementById(\"Anzeigen_Preis\").innerHTML = data[0].Preis + \"€\";\r\n    document.getElementById(\"Anzeigen_Beschreibung\").innerHTML = data[0].Beschreibung;\r\n    document.getElementById(\"Anzeigen_Kontakt\").innerHTML = data[0].Kontaktmöglichkeit;\r\n    document.getElementById(\"pic_details\").src=randomise_pic();\r\n\r\n    anzeige_marker = L.marker([data[0].lat, data[0].lng]).addTo(detail_map);\r\n    console.log(data[0].Titel)\r\n    \r\n    detail_map.setView([data[0].lat, data[0].lng],8);\r\n    anzeige_marker.bindPopup(data[0].Titel).openPopup();   \r\n    });\r\n    }) \r\n}\r\n\r\nfunction search_and_display()\r\n{\r\n    var nam = String($(\"#search_term\").val())\r\n    var dat = []\r\n    var data = []\r\n\r\n    for (var h = 0; h < 8; h++){\r\n        document.getElementById(\"Card\"+ Number(h)).setAttribute(\"hidden\",true);\r\n        document.getElementById(\"not_found\").setAttribute(\"hidden\",true)\r\n    }\r\n\r\n\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/listobjects?owner=s201655&token=dMinmYeldeDsBbu0iiEIPGTPws0_\",function(response)\r\n    { \r\n        for (var i = 0; i < response.length; i++)\r\n        data.push(response[i]);\r\n\r\n        for (var i = 0; i < data.length; i++)\r\n        {\r\n            if (data[i].jsonstring.Pflanzenart == nam\r\n                ||data[i].jsonstring.Email == nam\r\n                ||data[i].jsonstring.Beschreibung == nam\r\n                ||data[i].jsonstring.Pflanzeart == nam\r\n                ||data[i].jsonstring.Titel == nam)\r\n            {\r\n                dat.push(data[i]);\r\n               \r\n\r\n                for (var k = 0; k < dat.length; k++)\r\n                {\r\n                document.getElementById(\"Card\"+ Number(k)).removeAttribute(\"hidden\");\r\n                document.getElementById(\"Card\"+ Number(k)+ \"title\").innerHTML = dat[k].jsonstring.Titel;\r\n                document.getElementById(\"Card\"+ Number(k)+ \"price\").innerHTML = dat[k].jsonstring.Preis + \"€\";\r\n                document.getElementById(\"Card\"+ Number(k)+ \"text\").innerHTML = dat[k].jsonstring.Beschreibung;\r\n                document.getElementById(\"Card\"+ Number(k)+ \"contact\").innerHTML = dat[k].jsonstring.Kontaktmöglichkeit;\r\n                document.getElementById(\"Card\"+ Number(k)+ \"key\").innerHTML = dat[k].key;   \r\n                document.getElementById(\"pic\" + Number(k)).src=randomise_pic();              \r\n                }\r\n            }\r\n        };       \r\n        if (dat.length == 0)\r\n        {search_not_found()}\r\n        \r\n    });\r\n}\r\n\r\nfunction onMapClick(e) {\r\n    popup\r\n        .setLatLng(e.latlng)\r\n        .setContent(\"Kooridnaten deiner Anzeige:\" + e.latlng.toString())\r\n        .openOn(mymap);\r\n        lat[0] = e.latlng\r\n        console.log(lat[0].lat)\r\n}\r\n\r\nfunction marker()\r\n{\r\n    data = []\r\n    mark = []\r\n    marker = []\r\n    $.get(\"https://webtechlecture.appspot.com/cloudstore/listobjects?owner=s201655&token=dMinmYeldeDsBbu0iiEIPGTPws0_\",function(response)\r\n    {\r\n        for (var i = 0; i < response.length; i++)\r\n        {\r\n        data.push(response[i])\r\n        }       \r\n        for(var k = 0; k< data.length;k++)\r\n        {\r\n            if (\"lat\" in data[k].jsonstring)\r\n            {\r\n            mark.push(data[k].jsonstring.lat, data[k].jsonstring.lng,data[k].jsonstring.Titel)\r\n            }\r\n        }\r\n        for (var j = 0; j < mark.length; j++){\r\n            marker[j] = L.marker([mark[3*j], mark[3*j+1]]).addTo(overview_map);\r\n            marker[j].bindPopup(mark[3*j+2]).openPopup();\r\n            overview_map.setView([51.289406, 10.008545],6);\r\n        }\r\n    })   \r\n}\r\n\r\nfunction addKey0()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card0key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n\r\n\r\n\r\n}\r\n\r\nfunction addKey1()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card1key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey2()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card2key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey3()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card3key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey4()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card4key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey5()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card5key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey6()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card6key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey7()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card7key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nfunction addKey8()\r\n{\r\n  var jsonstring=  '{\"Main\":\"'+document.getElementById(\"Card8key\").innerHTML+'\"}';\r\n  console.log(\"add\"+ jsonstring);\r\n  $.get(\"https://webtechlecture.appspot.com/cloudstore/add?owner=s201655_key_log&token=FZ0UtB0FSNllekE69ckUlP74oSo_&jsonstring=\"+encodeURI(jsonstring),function(response)\r\n  {\r\n    console.log(response);\r\n  });\r\n}\r\n\r\nwindow.onload = function() {\r\n    if(!window.location.hash) {\r\n        window.location = window.location + '#loaded';\r\n        window.location.reload();\r\n    }\r\n}\r\n\r\nfunction myURL(){\r\n            window.location.replace('details.html');\r\n}\r\n\r\nfunction alert(){\r\n  document.getElementById(\"alert\").removeAttribute(\"hidden\")\r\n}\r\n\r\nfunction search_not_found(){\r\n  var nam = String($(\"#search_term\").val())\r\n  document.getElementById(\"not_found\").removeAttribute(\"hidden\")\r\n  document.getElementById(\"not_found_text\").innerHTML = 'Deine Suche zu \"'+ nam + '\" hat leider keine Ergebnisse ergeben.';\r\n}\r\n\r\nfunction randomise_pic(){\r\n  pics = [\"./Design-Ressourcen/Bilder/carrots.jpg\",\"./Design-Ressourcen/Bilder/garlic.jpg\",\"./Design-Ressourcen/Bilder/hand-saplings.jpg\",\"./Design-Ressourcen/Bilder/mangold.jpg\",\"./Design-Ressourcen/Bilder/carousel06.jpg\"]\r\n  return pics[Math.floor(Math.random() * 5)]\r\n}\r\n\r\nfunction scroll_to(){\r\n  document.getElementById(\"Hero1\").scrollIntoView({block: 'start', behavior: \"smooth\"});\r\n}"
        }
    ]
}